<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>TP 2 Data Acess Objet (DAO)</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --node-fill: #ECECFF; --node-border: #CCCCFF; --cluster-fill: #ffffde; --cluster-border: #aaaa33; --note-fill: #fff5ad; --note-border: #aaaa33; --mermaid-color: var(--text-color); }
.label { font-family: var(--mermaid-font-family); color: rgb(51, 51, 51); }
.label text { fill: rgb(51, 51, 51); }
.node rect, .node circle, .node ellipse, .node polygon { fill: var(--node-fill); stroke: rgb(147, 112, 219); stroke-width: 1px; }
.node .label { text-align: center; }
.node.clickable { cursor: pointer; }
.arrowheadPath { fill: var(--text-color); }
.edgePath .path { stroke: var(--text-color); stroke-width: 1.5px; }
.edgeLabel { background-color: rgb(232, 232, 232); text-align: center; }
.cluster rect { fill: var(--cluster-fill); stroke: var(--cluster-border); stroke-width: 1px; }
.cluster text { fill: var(--text-color); }
div.mermaidTooltip { position: absolute; text-align: center; max-width: 200px; padding: 2px; font-family: var(--mermaid-font-family); font-size: 12px; background: var(--cluster-fill); border: 1px solid var(--cluster-border); border-radius: 2px; pointer-events: none; z-index: 100; }
.actor { stroke: var(--node-border); fill: var(--node-fill); }
text.actor { fill: black; stroke: none; }
.actor-line { stroke: grey; }
.messageLine0 { stroke-width: 1.5; stroke: var(--text-color); }
.messageLine1 { stroke-width: 1.5; stroke: var(--text-color); }
#arrowhead { fill: var(--text-color); }
.sequenceNumber { fill: white; }
#sequencenumber { fill: var(--text-color); }
#crosshead path { fill: var(--text-color)  !important; stroke: var(--text-color)  !important; }
.messageText { fill: var(--text-color); stroke: none; }
.labelBox { stroke: var(--node-border); fill: var(--node-fill); }
.labelText { fill: black; stroke: none; }
.loopText { fill: black; stroke: none; }
.loopLine { stroke-width: 2; stroke: var(--node-border); }
.note { stroke: var(--cluster-border); fill: rgb(255, 245, 173); }
.noteText { fill: black; stroke: none; font-family: var(--mermaid-font-family); font-size: 14px; }
.activation0 { fill: rgb(244, 244, 244); stroke: rgb(102, 102, 102); }
.activation1 { fill: rgb(244, 244, 244); stroke: rgb(102, 102, 102); }
.activation2 { fill: rgb(244, 244, 244); stroke: rgb(102, 102, 102); }
.mermaid-main-font { font-family: var(--mermaid-font-family); }
.section { stroke: none; opacity: 0.2; }
.section0 { fill: rgba(102, 102, 255, 0.49); }
.section2 { fill: rgb(255, 244, 0); }
.section1, .section3 { fill: white; opacity: 0.2; }
.sectionTitle0 { fill: var(--text-color); }
.sectionTitle1 { fill: var(--text-color); }
.sectionTitle2 { fill: var(--text-color); }
.sectionTitle3 { fill: var(--text-color); }
.sectionTitle { text-anchor: start; font-size: 11px; font-family: var(--mermaid-font-family); }
.grid .tick { stroke: lightgrey; opacity: 0.3; shape-rendering: crispedges; }
.grid .tick text { font-family: var(--mermaid-font-family); }
.grid path { stroke-width: 0; }
.today { fill: none; stroke: red; stroke-width: 2px; }
.task { stroke-width: 2; }
.taskText { text-anchor: middle; font-family: var(--mermaid-font-family); }
.taskText:not([font-size]) { font-size: 11px; }
.taskTextOutsideRight { fill: black; text-anchor: start; font-size: 11px; font-family: var(--mermaid-font-family); }
.taskTextOutsideLeft { fill: black; text-anchor: end; font-size: 11px; }
.task.clickable { cursor: pointer; }
.taskText.clickable { cursor: pointer; font-weight: bold; fill: rgb(0, 49, 99) !important; }
.taskTextOutsideLeft.clickable { cursor: pointer; font-weight: bold; fill: rgb(0, 49, 99) !important; }
.taskTextOutsideRight.clickable { cursor: pointer; font-weight: bold; fill: rgb(0, 49, 99) !important; }
.taskText0, .taskText1, .taskText2, .taskText3 { fill: white; }
.task0, .task1, .task2, .task3 { fill: rgb(138, 144, 221); stroke: rgb(83, 79, 188); }
.taskTextOutside0, .taskTextOutside2 { fill: black; }
.taskTextOutside1, .taskTextOutside3 { fill: black; }
.active0, .active1, .active2, .active3 { fill: rgb(191, 199, 255); stroke: rgb(83, 79, 188); }
.activeText0, .activeText1, .activeText2, .activeText3 { fill: black !important; }
.done0, .done1, .done2, .done3 { stroke: grey; fill: lightgrey; stroke-width: 2; }
.doneText0, .doneText1, .doneText2, .doneText3 { fill: black !important; }
.crit0, .crit1, .crit2, .crit3 { stroke: rgb(255, 136, 136); fill: red; stroke-width: 2; }
.activeCrit0, .activeCrit1, .activeCrit2, .activeCrit3 { stroke: rgb(255, 136, 136); fill: rgb(191, 199, 255); stroke-width: 2; }
.doneCrit0, .doneCrit1, .doneCrit2, .doneCrit3 { stroke: rgb(255, 136, 136); fill: lightgrey; stroke-width: 2; cursor: pointer; shape-rendering: crispedges; }
.milestone { transform: rotate(45deg) scale(0.8, 0.8); }
.milestoneText { font-style: italic; }
.doneCritText0, .doneCritText1, .doneCritText2, .doneCritText3 { fill: black !important; }
.activeCritText0, .activeCritText1, .activeCritText2, .activeCritText3 { fill: black !important; }
.titleText { text-anchor: middle; font-size: 18px; fill: black; font-family: var(--mermaid-font-family); }
g.classGroup text { fill: rgb(147, 112, 219); stroke: none; font-family: var(--mermaid-font-family); font-size: 10px; }
g.classGroup text .title { font-weight: bolder; }
g.classGroup rect { fill: var(--node-fill); stroke: rgb(147, 112, 219); }
g.classGroup line { stroke: rgb(147, 112, 219); stroke-width: 1; }
.classLabel .box { stroke: none; stroke-width: 0; fill: var(--node-fill); opacity: 0.5; }
.classLabel .label { fill: rgb(147, 112, 219); font-size: 10px; }
.relation { stroke: rgb(147, 112, 219); stroke-width: 1; fill: none; }
#compositionStart { fill: rgb(147, 112, 219); stroke: rgb(147, 112, 219); stroke-width: 1; }
#compositionEnd { fill: rgb(147, 112, 219); stroke: rgb(147, 112, 219); stroke-width: 1; }
#aggregationStart { fill: var(--node-fill); stroke: rgb(147, 112, 219); stroke-width: 1; }
#aggregationEnd { fill: var(--node-fill); stroke: rgb(147, 112, 219); stroke-width: 1; }
#dependencyStart { fill: rgb(147, 112, 219); stroke: rgb(147, 112, 219); stroke-width: 1; }
#dependencyEnd { fill: rgb(147, 112, 219); stroke: rgb(147, 112, 219); stroke-width: 1; }
#extensionStart { fill: rgb(147, 112, 219); stroke: rgb(147, 112, 219); stroke-width: 1; }
#extensionEnd { fill: rgb(147, 112, 219); stroke: rgb(147, 112, 219); stroke-width: 1; }
.commit-id, .commit-msg, .branch-label { fill: lightgrey; color: lightgrey; font-family: var(--mermaid-font-family); }
.pieTitleText { text-anchor: middle; font-size: 25px; fill: var(--text-color); font-family: var(--mermaid-font-family); }
.slice { font-family: var(--mermaid-font-family); }
g.stateGroup text { fill: rgb(147, 112, 219); stroke: none; font-size: 10px; font-family: var(--mermaid-font-family); }
g.stateGroup text { fill: rgb(147, 112, 219); stroke: none; font-size: 10px; }
g.stateGroup .state-title { font-weight: bolder; fill: black; }
g.stateGroup rect { fill: var(--node-fill); stroke: rgb(147, 112, 219); }
g.stateGroup line { stroke: rgb(147, 112, 219); stroke-width: 1; }
.transition { stroke: rgb(147, 112, 219); stroke-width: 1; fill: none; }
.stateGroup .composit { fill: white; border-bottom: 1px; }
.state-note { stroke: var(--cluster-border); fill: rgb(255, 245, 173); }
.state-note text { fill: black; stroke: none; font-size: 10px; }
.stateLabel .box { stroke: none; stroke-width: 0; fill: var(--node-fill); opacity: 0.5; }
.stateLabel text { fill: black; font-size: 10px; font-weight: bold; font-family: var(--mermaid-font-family); }
.node text { font-size: 14px; }
div.mermaidTooltip { position: absolute; text-align: center; max-width: 200px; padding: 2px; font-family: var(--mermaid-font-family); font-size: 12px; background: var(--cluster-fill); border: 1px solid var(--cluster-border); border-radius: 2px; pointer-events: none; z-index: 100; }
#write .md-diagram-panel .md-diagram-panel-preview div { width: initial; }


:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none 0s ease 0s; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
svg[id^="mermaidChart"] { line-height: 1em; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
mark .md-meta { color: rgb(0, 0, 0); opacity: 0.3 !important; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}
#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}
#extensionStart  { fill: white; }
#extensionEnd  { fill: white; }

</style>
</head>
<body class='typora-export os-windows' >
<div  id='write'  class = 'is-node first-line-indent'><p>&nbsp;</p><h1><a name="tp-2-data-access-objet-dao" class="md-header-anchor"></a><span>TP 2: Data Access Objet (DAO)</span></h1><blockquote><p>😱<span> Comme vous pouvez le constater le sujet de ce TP est lui aussi long. Cela ne doit pas vous effrayer. Il mélange explication complète et manipulation pour être au maximum autosuffisant.</span></p><p>❗️<span> Il est possible que les copiés/collés fonctionne étrangement (caractère de fin de ligne qui disparaissent, indentation qui change). Faites-y attention !</span></p></blockquote><p><span>Dans ce TP vous allez :</span></p><ul><li><span>Implémenter le patron de conception DAO</span></li><li><span>Voir si votre programme fonctionne avec des tests unitaires reproductibles</span></li></ul><h2><a name="1-introduction" class="md-header-anchor"></a><span>1 Introduction</span></h2><p><span>Dans ce TP nous allons mettre en place la </span><strong><span>persistance</span></strong><span> de nos données.</span></p><blockquote><p>🤔<span>Pourquoi persister nos données  ? </span></p></blockquote><p><span>Actuellement si rien n&#39;est fait lorsque notre application s&#39;éteint, toutes les objets qu&#39;elle manipulait sont perdus.  Cela est du au fait que python travaille avec la </span><em><span>mémoire vive</span></em><span> de votre ordinateur (mémoire RAM pour </span><em><span>Random Access Memory</span></em><span>). C&#39;est une mémoire très rapide mais volatile, avec une place limitée (plus limitée que la mémoire de votre disque dur). Volatile signifie que quand votre ordinateur éteint, vos barrettes de RAM (l&#39;objet physique qui contient la mémoire) ne sont plus alimentées, et toutes les informations qu&#39;elles contenaient sont perdues. L&#39;autre problème provient de sa gestion par votre ordinateur. Pour faire simple, quand un programme tourne et crée des objets en RAM, lorsque ce programme s&#39;éteint les objets en mémoire RAM deviennent inaccessibles votre ordinateur considère que la place est libre.</span></p><p><span>Il nous faut donc un moyen de persistez nos données. Pour ça il y a deux grandes solutions :</span></p><ul><li><p><strong><span>Sérialiser</span></strong><span> les données pour les écrire dans un fichier, qui sera stocker sur le disque dur de la machine ou sur sur un serveur distant. On pourrait par exemple les écrire dans un fichier json</span></p><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="json"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="json"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 44px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 36px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -36px; width: 36px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 27px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"nom"</span> : <span class="cm-string">"Link"</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"force"</span> : <span class="cm-number">10</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"agilite"</span> : <span class="cm-number">20</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"magie"</span> : <span class="cm-number">5</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"defense"</span> : <span class="cm-number">13</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"point de vie"</span>: <span class="cm-number">55</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"arme"</span> : {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"nom"</span> : <span class="cm-string">"master sword"</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 27px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"phrase_attaque"</span> : </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 27px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 276px;"></div><div class="CodeMirror-gutters" style="height: 276px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 35px;"></div></div></div></div></pre></li></ul><p><span>Il nous suffirait ensuite de lire ce fichier pour recréer le personnage. </span></p><ul><li><span>Le sauvegarder dans une base de données (SQL ou no-SQL).</span></li></ul><p><span>Si les deux méthodes sont utilisables, il faut bien avoir conscience de leurs différences :</span></p><ul><li><span>La base de données fournie des outils de requêtage et administration des données. Pour le requêtage vous connaissez le langage SQL (Structured Query Language) pour les bases de données relationnelle, mais d&#39;autres langage existent pour d&#39;autres bases. Le SQL est un langage haut niveau pour manipuler des données. Même s&#39;il est normalisé, tous les systèmes de gestion de bases de données (SGBD) ont leur petites particularités. L&#39;inconvénient de l&#39;utilisation d&#39;une base de données et qu&#39;il faut avoir une base de données à disposition. </span></li><li><span>La gestion de la persistance par sérialisation suppose de redévelopper tout un système de gestion des données, ou d&#39;utiliser une bibliothèque python (appelé par moment API pour </span><em><span>application programming interface</span></em><span>) qui va vous aider à manipuler vos données.</span></li></ul><p><span>Pour résumer :</span></p><ul><li><strong><span>Base de données</span></strong><span> : propose une interface de gestion des données intégrée mais demande l&#39;installation d&#39;une base et son administration. Propose des outils normalisées de manipulation de données.</span></li><li><strong><span>Sérialisation</span></strong><span> : développer ses propres outils, ou utiliser des API qui les proposent.</span></li></ul><p><span>Pour rappel voici les 4 opérations de base de manipulation de données (et leur équivalent en SQL) :</span></p><ul><li><p><strong><span>C</span></strong><span>reate (Insert)</span></p></li><li><p><strong><span>R</span></strong><span>ead (Select)</span></p></li><li><p><strong><span>U</span></strong><span>pdate (Update)</span></p></li><li><p><strong><span>D</span></strong><span>elete (Delete)</span></p><blockquote><p>🤔<span>Souvent des élèves se demandent pourquoi l&#39;opération de copie ne fait pas partie des opérations de base. En fait copier une donnée revient à la lire (read) et l&#39;écrire (create). Par exemple copier une ligne en SQL s&#39;écrit :</span></p><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="sql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 36px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 28px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -28px; width: 28px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> <span class="cm-keyword">table</span> <span class="cm-keyword">SELECT</span> * <span class="cm-keyword">FROM</span> <span class="cm-keyword">table</span> <span class="cm-keyword">where</span> condition</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="height: 46px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 27px;"></div></div></div></div></pre></blockquote></li></ul><h2><a name="2-mise-en-place" class="md-header-anchor"></a><span>2 Mise en place</span></h2><ul><li><p><span>Ouvrez deux terminaux vers le cluster de calcul en utilisant PuTTY. Un servira pour git, et un autre pour PyCharm. En cas de difficulté référez-vous au document sur moodle pour la marche à suivre.</span></p></li><li><p><span>Dans le terminal pour git, retournez dans le dossier où vous avez téléchargé le code du premier TP en naviguant dans le terminal avec des </span><code>cd</code><span> puis fait un </span><code>git checkout</code><span>. Si vous avez respecté les instructions du TP1 il vous suffit de faire.</span></p><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="shell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 36px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 28px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -28px; width: 28px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">cd</span> 2A/complement_info_ensai_2020_2021</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">git</span> add .</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">git</span> commit <span class="cm-attribute">-m</span> <span class="cm-string">"reste TP1"</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">git</span> checkout TP2_ex1</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="height: 92px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 27px;"></div></div></div></div></pre></li><li><p><span>Dans le terminal pour Pycharm, lancez Pycharm en tapant </span><code>pycharm-community</code><span> (vous pouvez utiliser l&#39;auto completion avec la touche </span><code>Tab</code><span>)</span></p></li><li><p><span>Ouvrez le dossier contenant le code du TP</span></p></li><li><p><span>Dans le fichier </span><code>propreties</code><span> dans le package configuration fixez les valeurs suivantes :</span></p><ul><li><span>host = &quot;sgbd-eleves.domensai.ecole&quot;</span></li><li><span>port = &quot;5432&quot;</span></li><li><span>database = &quot;votre idep&quot;</span></li><li><span>user = &quot;votre idep&quot;</span></li><li><span>password = &quot;votre idep&quot;</span></li></ul></li><li><p><span>Dans le fichier </span><code>script_bdd.sql</code><span> dans le dossier ressources vous trouverez un script sql à exécuter pour initialisez votre base. Ce script est à lancer sur votre base de postgres de l&#39;Ensai disponible sur l&#39;ENT ou le lien suivant  </span><a href='http://sgbd-eleves.domensai.ecole/phppgadmin'><span>postgresEnsai</span></a><span> (accessible uniquement depuis votre VM ou le wifi Ensai). Pour rappel votre nom d&#39;utilisateur et votre mot de passe pour accéder au service sont tous deux votre IDEP Ensai.</span></p></li><li><p><span>Vérifiez que l&#39;interpréteur est bien configuré et lancez les tests du projet avec un clic droit sur le package test puis &quot;Run Unittests in test&quot;. Normalement seuls 3 tests devraient être en erreur, tous dans la classe test_armeDAO</span></p></li></ul><h2><a name="3-data-access-objet-dao" class="md-header-anchor"></a><span>3 Data Access Objet (DAO)</span></h2><h3><a name="31-modélisation" class="md-header-anchor"></a><span>3.1 Modélisation</span></h3><p><span>Reprenons le diagramme de classe du TP précédent et limitons nous à la partie &quot;arme&quot; (pas les personnage et armure) et réfléchissons où mettre une méthode qui permet de persister les armes.</span></p><div class="md-diagram-panel"><svg id="mermaidChart0" width="628.9765625" xmlns="http://www.w3.org/2000/svg" height="100%" viewBox="-10 -10 425.984375 440"><style>
:root { --mermaid-font-family: sans-serif}
:root { --mermaid-alt-font-family: sans-serif}</style><style></style><g></g><defs><marker id="extensionStart" class="extension" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="extensionEnd" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="compositionStart" class="extension" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="compositionEnd" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="aggregationStart" class="extension" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="aggregationEnd" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="dependencyStart" class="extension" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="dependencyEnd" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g id="mermaidChart0classId0" class="classGroup" transform="translate(0,131 )"><rect x="0" y="0" width="155.171875" height="61"></rect><text y="15" x="0"><tspan x="5">«abstract»</tspan><tspan class="title" dy="10" x="5">AbstractEquipement</tspan></text><line x1="0" y1="31" y2="31" x2="155.171875"></line><text x="5" y="41" fill="white" class="classText"><tspan x="5">+String nom</tspan><tspan x="5" dy="10">+int id</tspan></text><line x1="0" y1="57" y2="57" x2="155.171875"></line><text x="5" y="72" fill="white" class="classText"></text></g><g id="mermaidChart0classId1" class="classGroup" transform="translate(148.734375,242 )"><rect x="0" y="0" width="229.953125" height="98"></rect><text y="15" x="0"><tspan x="58.34375">«abstract»</tspan><tspan class="title" dy="10" x="58.34375">AbstractArme</tspan></text><line x1="0" y1="31" y2="31" x2="229.953125"></line><text x="5" y="41" fill="white" class="classText"><tspan x="5">+String database_label</tspan><tspan x="5" dy="10">+String description_attaque</tspan><tspan x="5" dy="10">+int degat</tspan></text><line x1="0" y1="67" y2="67" x2="229.953125"></line><text x="5" y="82" fill="white" class="classText"><tspan x="5">+AttaqueInfo utiliser_arme(Statistique stat_pers)</tspan><tspan x="5" dy="10">+float calcul_degats(Statistique stat_pers)</tspan></text></g><g id="mermaidChart0classId2" class="classGroup" transform="translate(31.9140625,0 )"><rect x="0" y="0" width="91.34375" height="81"></rect><text y="15" x="0"><tspan class="title" x="19.890625">Statistique</tspan></text><line x1="0" y1="21" y2="21" x2="91.34375"></line><text x="5" y="31" fill="white" class="classText"><tspan x="5">+int force</tspan><tspan x="5" dy="10">+int agilite</tspan><tspan x="5" dy="10">+int magie</tspan><tspan x="5" dy="10">+int defense</tspan><tspan x="5" dy="10">+int point_de_vie</tspan></text><line x1="0" y1="77" y2="77" x2="91.34375"></line><text x="5" y="92" fill="white" class="classText"></text></g><g id="mermaidChart0classId3" class="classGroup" transform="translate(205.171875,146.5 )"><rect x="0" y="0" width="34.34375" height="30"></rect><text y="15" x="0"><tspan class="title" x="5">Epee</tspan></text><line x1="0" y1="21" y2="21" x2="34.34375"></line><text x="5" y="31" fill="white" class="classText"></text><line x1="0" y1="26" y2="26" x2="34.34375"></line><text x="5" y="41" fill="white" class="classText"></text></g><g id="mermaidChart0classId4" class="classGroup" transform="translate(289.515625,146.5 )"><rect x="0" y="0" width="38.34375" height="30"></rect><text y="15" x="0"><tspan class="title" x="5">Baton</tspan></text><line x1="0" y1="21" y2="21" x2="38.34375"></line><text x="5" y="31" fill="white" class="classText"></text><line x1="0" y1="26" y2="26" x2="38.34375"></line><text x="5" y="41" fill="white" class="classText"></text></g><g id="mermaidChart0classId5" class="classGroup" transform="translate(377.859375,146.5 )"><rect x="0" y="0" width="28.125" height="30"></rect><text y="15" x="0"><tspan class="title" x="5">Arc</tspan></text><line x1="0" y1="21" y2="21" x2="28.125"></line><text x="5" y="31" fill="white" class="classText"></text><line x1="0" y1="26" y2="26" x2="28.125"></line><text x="5" y="41" fill="white" class="classText"></text></g><g id="mermaidChart0classId6" class="classGroup" transform="translate(143.7890625,390 )"><rect x="0" y="0" width="50" height="30"></rect><text y="15" x="0"><tspan class="title" x="5">Couteau</tspan></text><line x1="0" y1="21" y2="21" x2="50"></line><text x="5" y="31" fill="white" class="classText"></text><line x1="0" y1="26" y2="26" x2="50"></line><text x="5" y="41" fill="white" class="classText"></text></g><g id="mermaidChart0classId7" class="classGroup" transform="translate(243.7890625,390 )"><rect x="0" y="0" width="39.34375" height="30"></rect><text y="15" x="0"><tspan class="title" x="5">Lance</tspan></text><line x1="0" y1="21" y2="21" x2="39.34375"></line><text x="5" y="31" fill="white" class="classText"></text><line x1="0" y1="26" y2="26" x2="39.34375"></line><text x="5" y="41" fill="white" class="classText"></text></g><g id="mermaidChart0classId8" class="classGroup" transform="translate(333.1328125,390 )"><rect x="0" y="0" width="34.34375" height="30"></rect><text y="15" x="0"><tspan class="title" x="5">Livre</tspan></text><line x1="0" y1="21" y2="21" x2="34.34375"></line><text x="5" y="31" fill="white" class="classText"></text><line x1="0" y1="26" y2="26" x2="34.34375"></line><text x="5" y="41" fill="white" class="classText"></text></g><path d="M77.5859375,81L77.5859375,85.16666666666667C77.5859375,89.33333333333333,77.5859375,97.66666666666667,77.5859375,106C77.5859375,114.33333333333333,77.5859375,122.66666666666667,77.5859375,126.83333333333333L77.5859375,131" id="edge0" class="relation" marker-end="url(#compositionEnd)"></path><g class="cardinality"><text class="type1" x="72.5859375" y="93.5" fill="black" font-size="6">1</text></g><path d="M77.5859375,192L77.5859375,196.16666666666666C77.5859375,200.33333333333334,77.5859375,208.66666666666666,89.44401041666667,217.5478928811283C101.30208333333333,226.42911909558987,125.01822916666667,235.85823819117977,136.87630208333334,240.5727977389747L148.734375,245.28735728676963" id="edge1" class="relation" marker-start="url(#extensionStart)"></path><path d="M222.34375,176.5L222.34375,183.25C222.34375,190,222.34375,203.5,224.67298353040542,214.41666666666666C227.0022170608108,225.33333333333334,231.66068412162159,233.66666666666666,233.989917652027,237.83333333333334L236.31915118243242,242" id="edge2" class="relation" marker-end="url(#extensionEnd)"></path><path d="M308.6875,176.5L308.6875,183.25C308.6875,190,308.6875,203.5,306.15503589527026,214.41666666666666C303.6225717905406,225.33333333333334,298.5576435810811,233.66666666666666,296.02517947635135,237.83333333333334L293.4927153716216,242" id="edge3" class="relation" marker-end="url(#extensionEnd)"></path><path d="M391.921875,176.5L391.921875,183.25C391.921875,190,391.921875,203.5,384.70279068130634,214.41666666666666C377.4837063626126,225.33333333333334,363.0455377252252,233.66666666666666,355.8264534065315,237.83333333333334L348.6073690878378,242" id="edge4" class="relation" marker-end="url(#extensionEnd)"></path><path d="M200.85726351351352,340L195.51256334459458,344.1666666666667C190.1678631756757,348.3333333333333,179.47846283783784,356.6666666666667,174.13376266891893,365C168.7890625,373.3333333333333,168.7890625,381.6666666666667,168.7890625,385.8333333333333L168.7890625,390" id="edge5" class="relation" marker-start="url(#extensionStart)"></path><path d="M263.5453969594595,340L263.53132038288294,344.1666666666667C263.51724380630634,348.3333333333333,263.48909065315314,356.6666666666667,263.4750140765766,365C263.4609375,373.3333333333333,263.4609375,381.6666666666667,263.4609375,385.8333333333333L263.4609375,390" id="edge6" class="relation" marker-start="url(#extensionStart)"></path><path d="M321.05004222972974,340L325.92581644144144,344.1666666666667C330.80159065315314,348.3333333333333,340.5531390765766,356.6666666666667,345.42891328828836,365C350.3046875,373.3333333333333,350.3046875,381.6666666666667,350.3046875,385.8333333333333L350.3046875,390" id="edge7" class="relation" marker-start="url(#extensionStart)"></path></svg></div><blockquote><p>🔍<span>  Les plus observateurs d&#39;entre vous auront remarqué l&#39;apparition d&#39;un attribut </span><code>id</code><span> dans la classe </span><code>AbstractEquipement</code><span> ainsi que de </span><code>database_label</code><span> dans </span><code>AbstractArme</code><span>. Ce ne sont pas les seuls changement comparé à la semaine dernière. Ils ne changent pas le fonctionnement général du code, mais sont là pour éviter la redondance de code, et permettent des tests plus simples.</span></p></blockquote><p><span>Vu que les attributs de nos armes sont similaires on ne va pas coder ça dans les classes spécifique des armes. On pourrait mettre les méthodes dans </span><code>AbstractArme</code><span>.  Ça fonctionnerait bien d&#39;ailleurs. On aurait une classe unique avec nos méthodes pour interagir avec la base. Mais on ne va pas faire ça !</span></p><p><span>Et là vous êtes en droit de vous demander </span></p><blockquote><p>😱<span> Mais pourquoi ???</span></p></blockquote><p><span>Et la réponse est</span></p><blockquote><p>😛<span> Car ça n&#39;a aucun sens !</span></p></blockquote><p><span>Revenons sur la phrase : </span><strong><span>faible couplage, forte cohésion</span></strong><span>. Si on met toutes les méthodes de persistance de nos armes dans la classe </span><code>AbstractArme</code><span> on va avoir une classe qui :</span></p><ul><li>✔️<span> Détermine le comportement des armes.</span></li><li>❌<span> Détermine comment on persiste une arme.</span></li></ul><p><span>  Mais ça, </span><strong><span>ce n&#39;est pas de la responsabilité d&#39;une arme, mais du système de persistance choisi, </span></strong><span>ou du moins de </span><strong><span>l&#39;intermédiaire entre nos objets et le système de persistance</span></strong><span> ! Je n&#39;ai personnellement pas envie d&#39;aller modifier ma classe </span><code>AbstractArme</code><span> uniquement car j&#39;ai décidé de changer de système de gestion de la persistance. Je risque de modifier quelque chose que je ne devrai pas et créer des régressions (= faire apparaitre des erreurs sur un code existant) dans mon code. Or j&#39;aimerais bien limiter les sources d&#39;erreur.</span></p><p><span>À la place on va créer une classe qui va s&#39;occuper uniquement de cette tâche. Et on appelle ce type de classe DAO pour </span><strong><span>Data Access Object</span></strong><span>. C&#39;est une classe technique qui va faire </span><strong><span>l&#39;interface entre nos données stockées et notre application</span></strong><span>. Voilà ce que cela donne en terme de diagramme de classe</span></p><div class="md-diagram-panel"><svg id="mermaidChart1" width="811.0859375" xmlns="http://www.w3.org/2000/svg" height="100%" viewBox="-10 -10 547.390625 635"><style>
:root { --mermaid-font-family: sans-serif}
:root { --mermaid-alt-font-family: sans-serif}</style><style></style><g></g><defs><marker id="extensionStart" class="extension" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="extensionEnd" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="compositionStart" class="extension" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="compositionEnd" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="aggregationStart" class="extension" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="aggregationEnd" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="dependencyStart" class="extension" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="dependencyEnd" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g id="mermaidChart1classId9" class="classGroup" transform="translate(83.78125,131 )"><rect x="0" y="0" width="155.171875" height="61"></rect><text y="15" x="0"><tspan x="5">«abstract»</tspan><tspan class="title" dy="10" x="5">AbstractEquipement</tspan></text><line x1="0" y1="31" y2="31" x2="155.171875"></line><text x="5" y="41" fill="white" class="classText"><tspan x="5">+String nom</tspan><tspan x="5" dy="10">+int id</tspan></text><line x1="0" y1="57" y2="57" x2="155.171875"></line><text x="5" y="72" fill="white" class="classText"></text></g><g id="mermaidChart1classId10" class="classGroup" transform="translate(261.0625,242 )"><rect x="0" y="0" width="229.953125" height="98"></rect><text y="15" x="0"><tspan x="58.34375">«abstract»</tspan><tspan class="title" dy="10" x="58.34375">AbstractArme</tspan></text><line x1="0" y1="31" y2="31" x2="229.953125"></line><text x="5" y="41" fill="white" class="classText"><tspan x="5">+String database_label</tspan><tspan x="5" dy="10">+String description_attaque</tspan><tspan x="5" dy="10">+int degat</tspan></text><line x1="0" y1="67" y2="67" x2="229.953125"></line><text x="5" y="82" fill="white" class="classText"><tspan x="5">+AttaqueInfo utiliser_arme(Statistique stat_pers)</tspan><tspan x="5" dy="10">+float calculer_degats(Statistique stat_pers)</tspan></text></g><g id="mermaidChart1classId0" class="classGroup" transform="translate(115.6953125,0 )"><rect x="0" y="0" width="91.34375" height="81"></rect><text y="15" x="0"><tspan class="title" x="19.890625">Statistique</tspan></text><line x1="0" y1="21" y2="21" x2="91.34375"></line><text x="5" y="31" fill="white" class="classText"><tspan x="5">+int force</tspan><tspan x="5" dy="10">+int agilite</tspan><tspan x="5" dy="10">+int magie</tspan><tspan x="5" dy="10">+int defense</tspan><tspan x="5" dy="10">+int point_de_vie</tspan></text><line x1="0" y1="77" y2="77" x2="91.34375"></line><text x="5" y="92" fill="white" class="classText"></text></g><g id="mermaidChart1classId1" class="classGroup" transform="translate(0,390 )"><rect x="0" y="0" width="253.703125" height="87"></rect><text y="15" x="0"><tspan class="title" x="102.34375">ArmeDAO</tspan></text><line x1="0" y1="21" y2="21" x2="253.703125"></line><text x="5" y="31" fill="white" class="classText"></text><line x1="0" y1="26" y2="26" x2="253.703125"></line><text x="5" y="41" fill="white" class="classText"><tspan x="5">+AbstractArme create(AbstractArme arme_to_create)</tspan><tspan x="5" dy="10">+AbstractArme find_by_name(str nom)</tspan><tspan x="5" dy="10">+AbstractArme find_all()</tspan><tspan x="5" dy="10">+boolean update(AbstractArme arme_to_update)</tspan><tspan x="5" dy="10">+boolean delete(AbstractArme arme_to_delete)</tspan></text></g><g id="mermaidChart1classId2" class="classGroup" transform="translate(9.078125,527 )"><rect x="0" y="0" width="235.546875" height="88"></rect><text y="15" x="0"><tspan class="title" x="79.4375">PoolConnection</tspan></text><line x1="0" y1="21" y2="21" x2="235.546875"></line><text x="5" y="31" fill="white" class="classText"><tspan x="5">- __instance</tspan></text><line x1="0" y1="37" y2="37" x2="235.546875"></line><text x="5" y="52" fill="white" class="classText"><tspan x="5">+connexion getConnexion()</tspan><tspan x="5" dy="10">+bool closeConnexions()</tspan><tspan x="5" dy="10">+SimpleConnectionPool getInstance()</tspan><tspan x="5" dy="10">+None putBackConnexion(connection connexion)</tspan></text></g><g id="mermaidChart1classId3" class="classGroup" transform="translate(288.953125,146.5 )"><rect x="0" y="0" width="34.34375" height="30"></rect><text y="15" x="0"><tspan class="title" x="5">Epee</tspan></text><line x1="0" y1="21" y2="21" x2="34.34375"></line><text x="5" y="31" fill="white" class="classText"></text><line x1="0" y1="26" y2="26" x2="34.34375"></line><text x="5" y="41" fill="white" class="classText"></text></g><g id="mermaidChart1classId4" class="classGroup" transform="translate(373.296875,146.5 )"><rect x="0" y="0" width="38.34375" height="30"></rect><text y="15" x="0"><tspan class="title" x="5">Baton</tspan></text><line x1="0" y1="21" y2="21" x2="38.34375"></line><text x="5" y="31" fill="white" class="classText"></text><line x1="0" y1="26" y2="26" x2="38.34375"></line><text x="5" y="41" fill="white" class="classText"></text></g><g id="mermaidChart1classId5" class="classGroup" transform="translate(461.640625,146.5 )"><rect x="0" y="0" width="28.125" height="30"></rect><text y="15" x="0"><tspan class="title" x="5">Arc</tspan></text><line x1="0" y1="21" y2="21" x2="28.125"></line><text x="5" y="31" fill="white" class="classText"></text><line x1="0" y1="26" y2="26" x2="28.125"></line><text x="5" y="41" fill="white" class="classText"></text></g><g id="mermaidChart1classId6" class="classGroup" transform="translate(303.703125,418.5 )"><rect x="0" y="0" width="50" height="30"></rect><text y="15" x="0"><tspan class="title" x="5">Couteau</tspan></text><line x1="0" y1="21" y2="21" x2="50"></line><text x="5" y="31" fill="white" class="classText"></text><line x1="0" y1="26" y2="26" x2="50"></line><text x="5" y="41" fill="white" class="classText"></text></g><g id="mermaidChart1classId7" class="classGroup" transform="translate(403.703125,418.5 )"><rect x="0" y="0" width="39.34375" height="30"></rect><text y="15" x="0"><tspan class="title" x="5">Lance</tspan></text><line x1="0" y1="21" y2="21" x2="39.34375"></line><text x="5" y="31" fill="white" class="classText"></text><line x1="0" y1="26" y2="26" x2="39.34375"></line><text x="5" y="41" fill="white" class="classText"></text></g><g id="mermaidChart1classId8" class="classGroup" transform="translate(493.046875,418.5 )"><rect x="0" y="0" width="34.34375" height="30"></rect><text y="15" x="0"><tspan class="title" x="5">Livre</tspan></text><line x1="0" y1="21" y2="21" x2="34.34375"></line><text x="5" y="31" fill="white" class="classText"></text><line x1="0" y1="26" y2="26" x2="34.34375"></line><text x="5" y="41" fill="white" class="classText"></text></g><path d="M261.0625,325.14403059944823L238.69401041666666,331.7866921662069C216.32552083333334,338.42935373296547,171.58854166666666,351.71467686648276,149.22005208333334,362.52400509990804C126.8515625,373.3333333333333,126.8515625,381.6666666666667,126.8515625,385.8333333333333L126.8515625,390" id="edge8" class="relation" marker-start="url(#dependencyStart)"></path><g class="classLabel"><rect class="box" x="153.890625" y="337.125" width="56.328125" height="16.015625"></rect><text class="label" x="181.97424014256293" y="348.6304864989229" fill="red" text-anchor="middle">&lt;&lt;create&gt;&gt;</text></g><path d="M126.8515625,477L126.8515625,481.1666666666667C126.8515625,485.3333333333333,126.8515625,493.6666666666667,126.8515625,502C126.8515625,510.3333333333333,126.8515625,518.6666666666666,126.8515625,522.8333333333334L126.8515625,527" id="edge9" class="relation" marker-end="url(#dependencyEnd)"></path><g class="classLabel"><rect class="box" x="104.609375" y="490.5" width="44.65625" height="16"></rect><text class="label" x="126.8515625" y="502" fill="red" text-anchor="middle">&lt;&lt;use&gt;&gt;</text></g><path d="M161.3671875,81L161.3671875,85.16666666666667C161.3671875,89.33333333333333,161.3671875,97.66666666666667,161.3671875,106C161.3671875,114.33333333333333,161.3671875,122.66666666666667,161.3671875,126.83333333333333L161.3671875,131" id="edge10" class="relation" marker-end="url(#compositionEnd)"></path><g class="cardinality"><text class="type1" x="156.3671875" y="93.5" fill="black" font-size="6">1</text></g><path d="M161.3671875,192L161.3671875,196.16666666666666C161.3671875,200.33333333333334,161.3671875,208.66666666666666,177.98307291666666,218.56103064269598C194.59895833333334,228.4553946187253,227.83072916666666,239.91078923745056,244.44661458333334,245.6384865468132L261.0625,251.36618385617584" id="edge11" class="relation" marker-start="url(#extensionStart)"></path><path d="M306.125,176.5L306.125,183.25C306.125,190,306.125,203.5,310.0616026182433,214.41666666666666C313.9982052364865,225.33333333333334,321.87141047297297,233.66666666666666,325.80801309121625,237.83333333333334L329.7446157094595,242" id="edge12" class="relation" marker-end="url(#extensionEnd)"></path><path d="M392.46875,176.5L392.46875,183.25C392.46875,190,392.46875,203.5,391.5436549831081,214.41666666666666C390.61855996621625,225.33333333333334,388.76836993243245,233.66666666666666,387.8432749155406,237.83333333333334L386.91817989864865,242" id="edge13" class="relation" marker-end="url(#extensionEnd)"></path><path d="M475.703125,176.5L475.703125,183.25C475.703125,190,475.703125,203.5,470.09140976914415,214.41666666666666C464.47969453828836,225.33333333333334,453.2562640765766,233.66666666666666,447.64454884572075,237.83333333333334L442.0328336148649,242" id="edge14" class="relation" marker-end="url(#extensionEnd)"></path><path d="M344.69499577702703,340L342.02968398085585,344.1666666666667C339.36437218468467,348.3333333333333,334.03374859234236,356.6666666666667,331.3684367961712,369.75C328.703125,382.8333333333333,328.703125,400.6666666666667,328.703125,409.5833333333333L328.703125,418.5" id="edge15" class="relation" marker-start="url(#extensionStart)"></path><path d="M407.38312922297297,340L410.04844101914415,344.1666666666667C412.7137528153153,348.3333333333333,418.04437640765764,356.6666666666667,420.7096882038288,369.75C423.375,382.8333333333333,423.375,400.6666666666667,423.375,409.5833333333333L423.375,418.5" id="edge16" class="relation" marker-start="url(#extensionStart)"></path><path d="M464.8877744932432,340L472.4429370777027,344.1666666666667C479.99809966216213,348.3333333333333,495.1084248310811,356.6666666666667,502.6635874155406,369.75C510.21875,382.8333333333333,510.21875,400.6666666666667,510.21875,409.5833333333333L510.21875,418.5" id="edge17" class="relation" marker-start="url(#extensionStart)"></path></svg></div><blockquote><p>🙀<span> Cela commence à faire beaucoup de classe et ce n&#39;est qu&#39;un début. Je ne cache pas qu&#39;on va terminer avec pas mal de classes. Mais toutes nos classes auront une </span><strong><span>tâche bien précise</span></strong><span>. Cela aide à la lisibilité du code, sa maintenabilité et son débuggage. Par exemple la classe </span><code>ReservoirConnexion</code><span> sert uniquement à gérer les connexions avec la base. S&#39;il y a un problème avec les connexion je sais le problème vient de cette classe. Et cela évite d&#39;avoir des bout de code pour gérer les connexions partout.</span></p></blockquote><h3><a name="32-gestion-des-connexions-et-patern-singleton" class="md-header-anchor"></a><span>3.2 Gestion des connexions et patern singleton</span></h3><p><span>Pour nous connecter à la base de données nous allons utiliser la bibliothèque python </span><code>psycopg2</code><span>. C&#39;est elle qui va établir la connexion avec la base, envoyer nos requêtes et nous retourner les résultats. Mais il faut faire un peu attention à la gestion des connexions. Car on pourrait se retrouver à ouvrir des centaines de connexion rapidement et dégrader les performances de notre application. C&#39;est le travail de la classe </span><code>PoolConnection</code><span>.</span></p><p><span>La classe </span><code>PoolConnection</code><span> est une classe singleton (</span><a href='https://fr.wikipedia.org/wiki/Singleton_(patron_de_conception)'><span>singleton patern</span></a><span>), c&#39;est à dire que toutes les instances de la classe </span><code>PoolConnection</code><span> pointent vers le même objet. La première fois qu&#39;une connexion sera demandée, un </span><em><span>pool</span></em><span> (réservoir) de connexion sera initialisé pour l&#39;application. Et à partir de là chaque fois qu&#39;une connexion sera requise, une connexion de se </span><em><span>pool</span></em><span> sera utilisée. Comme ça, on s&#39;assure d&#39;utiliser un nombre constant de connexion dans notre application.</span></p><p><span>Cette classe est une solution purement technique alors n&#39;hésitez pas à la réutiliser pour votre projet. Le code de la classe est bien documenté pour les personnes intéressées.</span></p><p><span>Si vous voulez plus d&#39;information voici un tuto en anglais : </span><a href='https://pynative.com/psycopg2-python-postgresql-connection-pooling/'><span>article de pynative</span></a></p><h3><a name="33-dao-et-crud" class="md-header-anchor"></a><span>3.3 DAO et CRUD</span></h3><p><span>Si vous faites attention, les méthodes de notre DAO ressemblent à celles du CRUD. C&#39;est normal car c&#39;est dans ces méthodes que le code SQL va être stocké, donc il nous faut les méthodes de bases. Néanmoins pour gagner du temps rien n&#39;empêche de créer des méthodes plus complexe. Par exemple il y a deux méthodes pour lire des données :</span></p><ul><li><code>find_by_id()</code><span> : qui retourne juste l&#39;enregistrement avec l&#39;id souhaité ;</span></li><li><code>find_all()</code><span> : qui va retourner toute une table.</span></li></ul><p><span>Mais on pourrait imaginer plus de méthode si elles nous sont utiles. Ainsi la liste proposée n&#39;est en rien absolue, elle doit être adaptée à vos besoins.</span></p><p><span>Voici la fonctionnement général d&#39;une des méthodes de la DAO (avec un exemple de code)</span></p><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="python" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 44px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 36px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>27</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -36px; width: 36px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 27px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">create</span>(<span class="cm-variable">arme</span>):</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># Etape 1 : On récupère une connexion</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">connexion</span> = <span class="cm-variable">ReservoirConnexion</span>.<span class="cm-property">getConnexion</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># Etape 2 : on crée un curseur qui va nous permettre d'exécuter la requête</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">curseur</span> = <span class="cm-variable">connexion</span>.<span class="cm-property">cursor</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># Etape 3 : on crée un bloc try/except</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">try</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># Etape 4 : on exécute notre requête SQL. Les %s vont être remplacé par les valeurs passé dans la seconde partie du execute</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">curseur</span>.<span class="cm-property">execute</span>(</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 27px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"INSERT INTO arme (nom, description_attaque,degat)"</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">" VALUES (%s, %s, %s) RETURNING id;"</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  , (<span class="cm-variable">arme</span>.<span class="cm-property">nom</span>, <span class="cm-variable">arme</span>.<span class="cm-property">description_attaque</span>, <span class="cm-variable">arme</span>.<span class="cm-property">degat</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># Etape 5 (optionnelle) : on récupère le résultat de la requête</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">arme</span>.<span class="cm-property">id</span> = <span class="cm-variable">curseur</span>.<span class="cm-property">fetchone</span>()[<span class="cm-number">0</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">16</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># Etape 6 : on commit notre requête pour la rendre permanente.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">17</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">connexion</span>.<span class="cm-property">commit</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">18</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">except</span> <span class="cm-variable">psycopg2</span>.<span class="cm-property">Error</span> <span class="cm-keyword">as</span> <span class="cm-variable">error</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">19</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># Etape 7 : s'il y a une erreur on fait un rollback et on annule la requête</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 27px;">20</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">AbstractDao</span>.<span class="cm-property">connection</span>.<span class="cm-property">rollback</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">21</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">raise</span> <span class="cm-variable">error</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">22</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">finally</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">23</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># Etape 8 : on ferme le curseur pour libérer de la mémoire coté base et on remet la connexion dans notre reservoir à connexion.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">24</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">curseur</span>.<span class="cm-property">close</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">25</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ReservoirConnexion</span>.<span class="cm-property">putBackConnexion</span>(<span class="cm-variable">connexion</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">26</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment"># Etape 9 : on retourne l'objet demandé.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 27px;">27</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">arme</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 897px;"></div><div class="CodeMirror-gutters" style="height: 897px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 35px;"></div></div></div></div></pre><p><span>Les requêtes que vous allez réaliser se découpent en deux catégories :</span></p><ul><li><span>Celles qui lisent la bases (les requêtes de type SELECT)</span></li><li><span>Celles qui la modifient (les autres)</span></li></ul><p><span>Dans le cas de requête de lecture il n&#39;y a pas besoin de valider votre transaction vu que la base ne change pas d&#39;état. Cela permet de retirer la ligne de commit et la gestion du rollback.</span></p><blockquote><p>📖<span> Rappel des cours sur les base des données. Pour assurer l&#39;intégrité et la cohérence des données, les SGBD ne réalisent pas directement les transactions demandées sur les données. Ils les font d&#39;abord &quot;pour de faux&quot; sans les valider. Et c&#39;est seulement quand une transaction est validée (qu&#39;elle est </span><em><span>commit</span></em><span>) que les changements deviennent permanents. Ce fonctionnement en deux étapes rend les retours en arrière (</span><em><span>rollback</span></em><span>) facile. Et comme nous n&#39;avons pas configurer les </span><em><span>auto commit</span></em><span> il faut faire le </span><em><span>commit</span></em><span> à la main. Dans le cas d&#39;opération de lecture, comme on ne modifie pas de données pas besoin de commit la transaction SQL</span></p></blockquote><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="python"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 36px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 28px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>9</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -28px; width: 28px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">connexion</span> = <span class="cm-variable">PoolConnection</span>.<span class="cm-property">getConnexion</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">curseur</span> = <span class="cm-variable">connexion</span>.<span class="cm-property">cursor</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">try</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">curseur</span>.<span class="cm-property">execute</span>(<span class="cm-variable">requete_sql</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment"># du code</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">finally</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">curseur</span>.<span class="cm-property">close</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PoolConnection</span>.<span class="cm-property">putBackConnexion</span>(<span class="cm-variable">connexion</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">return</span> <span class="cm-variable">something</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="height: 207px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 27px;"></div></div></div></div></pre><p><span>Pour les autres la structure est la suivante :</span></p><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="python"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 44px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 36px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>13</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -36px; width: 36px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 27px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">connexion</span> = <span class="cm-variable">PoolConnection</span>.<span class="cm-property">getConnexion</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">curseur</span> = <span class="cm-variable">connexion</span>.<span class="cm-property">cursor</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">try</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">curseur</span>.<span class="cm-property">execute</span>(<span class="cm-variable">requete_sql</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># du code</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">connexion</span>.<span class="cm-property">commit</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">except</span> <span class="cm-variable">psycopg2</span>.<span class="cm-property">Error</span> <span class="cm-keyword">as</span> <span class="cm-variable">error</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">AbstractDao</span>.<span class="cm-property">connection</span>.<span class="cm-property">rollback</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">raise</span> <span class="cm-variable">error</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 27px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">finally</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">curseur</span>.<span class="cm-property">close</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PoolConnection</span>.<span class="cm-property">putBackConnexion</span>(<span class="cm-variable">connexion</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 27px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">return</span> <span class="cm-variable">something</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 299px;"></div><div class="CodeMirror-gutters" style="height: 299px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 35px;"></div></div></div></div></pre><p><span>L&#39;objet curseur contient un pointeur vers le résultats de votre requête. Vous avez 3 méthodes pour récupérer le résultat :</span></p><ul><li><p><code>curseur.fetchall()</code><span> : retourne l&#39;intégralité des résultats sous forme d&#39;une liste de tuple. Les tuples sont les lignes récupérées. Cette méthode fonctionne très bien quand on veut tout le résultat en une fois, sauf quand on a des millions d&#39;enregistrements car :</span></p><ul><li><span>Le transfert de données sur internet va prendre du temps et bloquer notre application;</span></li><li><span>Notre application va devoir gérer une grande quantité de données, et elle en est peut-être incapable.</span></li></ul><p><span> Pour traiter ce tableau</span></p><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="python"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 36px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 28px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -28px; width: 28px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">records</span> = <span class="cm-variable">curseur</span>.<span class="cm-property">fetchall</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">armes</span> = [] </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">row</span> <span class="cm-keyword">in</span> <span class="cm-variable">records</span> : <span class="cm-comment"># boucle sur les lignes du tableau</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">armes</span>.<span class="cm-property">append</span>(<span class="cm-variable">Arme</span>(<span class="cm-variable">row</span>[<span class="cm-number">0</span>], <span class="cm-variable">row</span>[<span class="cm-number">1</span>]...)) <span class="cm-comment">#row[X] = la X+1 ième colonnes de la ligne row</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="height: 161px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 27px;"></div></div></div></div></pre></li><li><p><code>curseur.fetchmany(size)</code><span>: retourne autant d&#39;enregistrement que demandé sous forme d&#39;une liste de tuple. Elle permet de contrôler le volume de données que l&#39;on traite. Si vous appelez de nouveau </span><code>fetchmany(size)</code><span> sur votre curseur vous allez récupérer les lignes suivantes (vous obtenez un système de pagination). La contrepartie est que cela demande de garder le curseur ouvert. Le résultat ce traite de la même manière que précédemment ; </span></p></li><li><p><code>curseur.fetchone()</code><span> : retourne uniquement un enregistrement (un tuple). Si vous appelez de nouveau  </span><code>fetchone()</code><span> sur le même curseur vous obtiendrez la ligne suivante.</span></p></li></ul><p><span>Pour plus d&#39;information : </span><a href='https://pynative.com/python-cursor-fetchall-fetchmany-fetchone-to-read-rows-from-table/'><span>article de pynative</span></a></p><h3><a name="exercice-1--dao-basique" class="md-header-anchor"></a><span>Exercice 1 : DAO basique</span></h3><p><span>Dans une première approche on va considérer que l&#39;on manipule uniquement des armes de classe </span><code>Epee</code><span>.</span></p><ul><li><p><span>Codez les méthodes manquantes de </span><code>ArmeDao</code><span>. Respectez les structures suivantes :</span></p><ul><li><p><span>Méthodes qui mettent à jour des données :</span></p><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="python" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 44px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 36px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>14</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -36px; width: 36px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 27px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">connexion</span> = <span class="cm-variable">PoolConnection</span>.<span class="cm-property">getConnexion</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">curseur</span> = <span class="cm-variable">connexion</span>.<span class="cm-property">cursor</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">try</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">curseur</span>.<span class="cm-property">execute</span>(<span class="cm-variable">requete_sql</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># du code</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">connexion</span>.<span class="cm-property">commit</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">except</span> <span class="cm-variable">psycopg2</span>.<span class="cm-property">Error</span> <span class="cm-keyword">as</span> <span class="cm-variable">error</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">AbstractDao</span>.<span class="cm-property">connection</span>.<span class="cm-property">rollback</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">raise</span> <span class="cm-variable">error</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 27px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">finally</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">curseur</span>.<span class="cm-property">close</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PoolConnection</span>.<span class="cm-property">putBackConnexion</span>(<span class="cm-variable">connexion</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 27px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">return</span> <span class="cm-variable">something</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 27px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 414px;"></div><div class="CodeMirror-gutters" style="height: 414px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 35px;"></div></div></div></div></pre></li><li><p><span>Méthode qui ne font que lire les données :</span></p><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="python"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 36px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 28px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>9</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -28px; width: 28px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">connexion</span> = <span class="cm-variable">PoolConnection</span>.<span class="cm-property">getConnexion</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">curseur</span> = <span class="cm-variable">connexion</span>.<span class="cm-property">cursor</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">try</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">curseur</span>.<span class="cm-property">execute</span>(<span class="cm-variable">requete_sql</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment"># du code</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">finally</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">curseur</span>.<span class="cm-property">close</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PoolConnection</span>.<span class="cm-property">putBackConnexion</span>(<span class="cm-variable">connexion</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">return</span> <span class="cm-variable">something</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 276px;"></div><div class="CodeMirror-gutters" style="height: 276px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 27px;"></div></div></div></div></pre></li></ul></li><li><p><span>Complétez les tests de la classe </span><code>TestArmeDao</code><span> pour qu&#39;ils soit tous au vert. Pourquoi les tests actuels ne sont pas de &quot;bons&quot; tests ? (avec les outils actuellement à votre disposition il est difficile de faire mieux) ;</span></p></li><li><p><span>Aller voir dans la base si tout se passe correctement.</span></p></li></ul><h3><a name="exercice-2--dao-avec-des-types-darmes" class="md-header-anchor"></a><span>Exercice 2 : DAO avec des types d&#39;armes</span></h3><p><span>Notre application ne prend pas en charge que des armes de la classe </span><code>Epee</code><span>, nous allons maintenant implémenter la gestion différenciée des types d&#39;armes</span></p><ul><li><p><span>Mettez à jour le fichier </span><code>script_bdd.sql</code><span> avec la requête de création de la table </span><code>type_arme</code><span> qui va contenir un id pour chaque type et un label ;</span></p></li><li><p><span>Insérez une lignes pour chaque type d&#39;arme dans la table </span><code>type_arme</code><span>. Pour les labels vous utiliserez les </span><code>database_label</code><span> des classes d&#39;armes ;</span></p></li><li><p><span>Mettez à jour la table </span><code>arme</code><span> pour gérer les types via une clef étrangère. Le plus simple est de supprimer la table et d&#39;en faire une nouvelle;</span></p></li><li><p><span>Créez une classe </span><code>TypeArmeDao</code><span> pour récupérer les id des armes. Vous créerez deux méthodes :</span></p><ul><li><code>find_id_by_label</code><span> pour retourner l&#39;id d&#39;un type d&#39;arme ;</span></li><li><code>find_all</code><span>pour retourner le tableau de tous les types d&#39;arme ;</span></li></ul></li><li><p><span>Mettez à jours la classe </span><code>ArmeDao</code><span>pour gérer les types d&#39;arme.</span></p></li></ul><p><span>Voici quelques conseils :</span></p><ul><li><p><span>Pour les clés étrangères en postgresSQL : </span><a href='https://www.postgresqltutorial.com/postgresql-foreign-key/'><span>tuto</span></a><span> ;</span></p></li><li><p><span>Vous pouvez utiliser l&#39;attribut de classe </span><code>database_label</code><span> de chaque arme pour avoir son label en base ;</span></p></li><li><p><span>Dans le cadre du TP limitez vous à 3 types. Dans la correction vous trouverez le code complet ;</span></p></li><li><p><span>Pour limiter la redondance de code faite une méthode qui à partir d&#39;un enregistrement de la table retourne l&#39;arme instanciée avec la bonne classe. Elle vous sera utile dans les deux méthodes </span><code>find_all</code><span> et </span><code>find_by_id</code><span> ;</span></p></li><li><p><span>Ici vous pouvez faire des </span><code>if/elif/else</code><span> pour initialisez vos objets :</span></p><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="python"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="python"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 36px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 28px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -28px; width: 28px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> <span class="cm-variable">label</span> == <span class="cm-variable">Epee</span>.<span class="cm-property">database_label</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">arme</span> = <span class="cm-variable">Epee</span>( .... )</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">elif</span> <span class="cm-variable">label</span> == <span class="cm-variable">Lance</span>.<span class="cm-property">database_label</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">arme</span> = <span class="cm-variable">Lance</span>( .... )</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="height: 92px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 27px;"></div></div></div></div></pre></li><li><p><span>Seules les méthodes </span><code>create</code><span>, </span><code>find_by_id</code><span>et </span><code>find_all</code><span> ont besoin d&#39;être modifiées ;</span></p></li><li><p><span>Pensez à mettre à jour vos tests pour voir si votre code fonctionne.</span></p></li></ul><h3><a name="exercice-3--dao-avec-les-statistiques-des-armes" class="md-header-anchor"></a><span>Exercice 3 : DAO avec les statistiques des armes</span></h3><p><span>Vous allez maintenant terminer la DAO de nos armes en gérant leurs statistiques. Pour cela vous allez devoir :</span></p><ul><li><span>Créer une table avec les statistiques des armes</span></li><li><span>Mettre à jours votre classe </span><code>ArmeDao</code><span> pour gérer les statistiques des armes</span></li><li><span>Mettre à jour vos tests</span></li></ul><p><span>Voici quelques conseils :</span></p><ul><li><p><span>Mettez à jour le fichier </span><code>script_bdd.sql</code><span> avec la requête de création de la table </span><code>statistique_objet</code><span> qui va contenir les bonus qu&#39;apportent un objet. Votre table devra avoir une référence vers la table </span><code>arme</code><span> ;</span></p></li><li><p><span>Pour permettre une suppression en cascade en PostgreSQL ajoutez </span><code>ON DELETE CASCADE</code><span> a votre clef étrangère. Par exemple</span></p><pre spellcheck="false" class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" lang="sql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 36px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 28px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -28px; width: 28px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -28px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">CONSTRAINT nom_fkey FOREIGN KEY (id_equipement) REFERENCES arme(arme_id) &nbsp;<span class="cm-keyword">ON</span> <span class="cm-keyword">DELETE</span> CASCADE</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="height: 69px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 27px;"></div></div></div></div></pre></li><li><p><span>Vous n&#39;avez pas à tous refaire, seulement modifier :</span></p><ul><li><p><span>Le code SQL de la méthode qui à partir d&#39;une ligne instancie un objet héritant de </span><code>AbstractArme</code></p></li><li><p><span>Le code SQL de la  méthode d&#39;insertion d&#39;une nouvelle arme. Vous ferez deux requêtes :</span></p><ul><li><span>Une pour ajouter une ligne dans la table </span><code>arme</code><span> et récupérer l&#39;id de l&#39;arme</span></li><li><span>Une pour ajouter une ligne table </span><code>statistique_objet</code><span> (ou tout autre nom que vous avez donné) avec l&#39;id récupéré</span></li></ul></li><li><p><span>Le code SQL de la  méthode de mise à jour d&#39;une arme.</span></p></li></ul></li><li><p><span>Vos testes doivent vous servir à valider votre code</span></p></li></ul><h2><a name="4-conclusion" class="md-header-anchor"></a><span>4 Conclusion</span></h2><p><span>Dans ce TP vous avez implémenté votre première DAO. C&#39;est une classe technique qui sert à communiquer avec votre système de persistance des données. L&#39;avantage premier de faire une classe à part est de découpler au maximum la gestion du système de persistance et le code métier de votre application. Si vous décidez d&#39;arrêter d&#39;utiliser une base de données relationnelle et préférez désormais une base de données </span><em><span>no SQL</span></em><span> vous allez devoir changer uniquement les classes DAO tout en exposant toujours les mêmes méthodes.</span></p><p><span>Vous trouverez les codes des corrections sur les branches suivantes :</span></p><ul><li><code>TP2_ex1_correction</code><span> pour l&#39;exercice 1</span></li><li><code>TP2_ex2_correction</code><span> pour l&#39;exercice 2</span></li><li><code>TP2_ex3_correction</code><span> pour l&#39;exercice 3</span></li></ul><h2><a name="pour-aller-plus-loin" class="md-header-anchor"></a><span>Pour aller plus loin</span></h2><p><span>Dans la correction j&#39;utilise une classe que j&#39;appelle </span><code>factory</code><span>. L&#39;unique but de cette classe est de construire des objets à partir des paramètres données. Vous pouvez faire un parallèle avec une usine qui fabrique des objets à partir de manière première pour le compte d&#39;une entreprise tierce (externalisation de la production). L&#39;entreprise paie l&#39;usine pour produire des objets car elle ne dispose pas de l&#39;expertise nécessaire pour les produire. </span></p><p><span>En programmation c&#39;est la même chose. On va utiliser des intermédiaires ultra spécialisés (comme les </span><em><span>DAO</span></em><span> ou les </span><em><span>factories</span></em><span>) pour nous rendre un besoin technique spécifique car on considère que ce n&#39;est pas à notre code métier de savoir faire cela.  Cela permet en plus une répartition du travail en fonction des spécialités de chacun et une mutualisation du code. Donc moins de code à écrire et à maintenir (une modification impactera peu de lignes de code).</span></p><p><span>Mais tout ce fonctionnement à un coût. On multiplie le nombre de classes et le code peut sembler imposant. Une comparaison souvent utilisée est l&#39;opposition legos / playmobils. Les legos sont un système extrêmement modulaire et on peut tout faire avec. Le pire comme le meilleur. Mais cela demande du temps et souvent un plan d&#39;assemblage pour comprendre comment les utiliser. Alors que les playmobils sont moins modulaire pour la construction mais plus rapidement utilisable. Et ne nécessitent pas de plan. Chacun à ses avantages et inconvénients et il faut souvent trouver un juste milieu entre les deux approches.</span></p><p><span>Le projet et les TP sont à but pédagogiques. Vous devez vous forcer à faire quelque chose de bien conçu et de modulaire. Peut-être pas autant que tout ce qui est proposé dans les corrections, mais vous devez vous forcer à sortir de votre zone de confort et appliquer les principes qui vous sont proposés.</span></p><p><span>Quelques liens intéressant :</span></p><ul><li><a href='https://realpython.com/python-memory-management/'><span>Gestion de la mémoire en python</span></a></li><li><a href='https://fr.wikipedia.org/wiki/S%C3%A9rialisation'><span>Serialisation</span></a></li><li><a href='https://fr.wikipedia.org/wiki/Objet_d%27acc%C3%A8s_aux_donn%C3%A9es'><span>DAO</span></a></li><li><a href='https://pynative.com/python-postgresql-tutorial/'><span>psycopg tutorial</span></a></li></ul></div>
</body>
</html>